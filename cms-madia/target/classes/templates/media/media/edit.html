<!--# layout("/common/layout.html",{"jsBase":"/js/media/media/"}){ -->

<form class="layui-form layui-form-pane" id="updateForm">

    <div>
        <span> >> 版权信息</span><br/>
        <div class="layui-row">
            <div class="layui-form-item">

                <div class="layui-inline">
                    <label class="layui-form-label">专辑名称</label>
                    <div class="layui-input-inline">
                        <input type="text" readonly="readonly" class="layui-input" id="medianame" name="medianame"
                               value="${media.medianame}">
                    </div>
                </div>

                <div class="layui-inline">
                    <label class="layui-form-label">专辑类型</label>
                    <div class="layui-input-inline">
                        <!-- <input type="text" readonly="readonly" class="layui-input" id="mediatype" name="mediatype"
                                value="${media.mediatype}">-->
                        <layui:simpleDictSelect style='layui-input-inline' type="resource.state"
                                                id="mediatype" name="mediatype" readonly="readonly"
                                                value="${media.mediatype}"/>
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">资源状态</label>
                    <div class="layui-input-inline">
                        <!-- <input type="text" readonly="readonly" class="layui-input" id="authstate" name="authstate"
                                value="${media.authstate}">-->
                        <layui:simpleDictSelect style='layui-input-inline' type="album.status"
                                                id="authstate" name="authstate" readonly="readonly"
                                                value="${media.authstate}"/>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-row">
            <div class="layui-form-item">

                <div class="layui-inline">
                    <label class="layui-form-label">副标题</label>
                    <div class="layui-input-inline">
                        <input type="text" readonly="readonly" class="layui-input" id="title" name="title"
                               value="${media.title}">
                    </div>
                </div>

                <div class="layui-inline">
                    <label class="layui-form-label">音频数</label>
                    <div class="layui-input-inline">
                        <input type="text" readonly="readonly" class="layui-input" id="totalCount" name="totalCount"
                               value="${media.totalCount}"
                        >
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">更新频率</label>
                    <div class="layui-input-inline">
                        <input type="text" readonly="readonly" class="layui-input" id="alternation"
                               name="alternation" value="${media.alternation}"
                        >
                    </div>
                </div>

            </div>

            <div class="layui-row">
                <label class="layui-form-label">建议定价</label>
                <div class="layui-input-inline">
                    <input type="text" readonly="readonly" class="layui-input" id="price" name="price"
                           value="${media.price}"
                    >
                </div>
            </div>
        </div>
    </div>
    <br>


    <div>
        <span> >> 演播者信息</span>
        <div class="layui-row">
            <div class="layui-inline">
                <label class="layui-form-label">作者</label>
                <div class="layui-input-inline">
                    <input type="text" readonly="readonly" class="layui-input" id="author" name="author"
                           value="${media.author}">
                </div>
            </div>

            <div class="layui-inline">
                <label class="layui-form-label">演播者</label>
                <div class="layui-input-inline">
                    <input type="text" readonly="readonly" class="layui-input" id="player" name="player"
                           value="${media.player}">
                </div>
            </div>

        </div><br/>

        <div class="layui-row">

            <div class="layui-inline">
                <label class="layui-form-label">作者简介</label>
                <div class="layui-input-inline">
                        <textarea class="layui-textarea" readonly="readonly" id="authorNote" name="authorNote"
                                  value="${media.authorNote}">
                            ${media.authorNote}
                        </textarea>
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">演播者简介</label>
                <div class="layui-input-inline">
                        <textarea class="layui-textarea" readonly="readonly" id="playerNote" name="playerNote"
                                  value="${media.playerNote}">
                            ${media.playerNote}
                        </textarea>
                </div>
            </div>
        </div>
    </div>
    <br>

    <div>
        <span> >> 资源信息</span>
        <div class="layui-row">
            <div class="layui-form-item">

                <div class="layui-inline">
                    <label class="layui-form-label">专辑封面图</label>
                    <div class="layui-input-inline">
                        <!--<input type="text" id="imageurl" name="imageurl"  value="${media.imageurl}"   class="layui-input" >-->
                        <img id="imageurl1" name="imageurl1" src="${media.imageurl}"
                             value="${media.imageurl}" style="width: 200px; height: 200px">

                        <input type="hidden" id="imageurl" name="imageurl" value=${media.imageurl}>
                    </div>
                </div>

                <div class="layui-inline">
                    <div class="layui-upload">
                        <button type="button" class="layui-btn" id="test1">上传图片</button>
                        <div class="layui-upload-list">
                            <!--预览图片-->
                            <img class="layui-upload-img" id="demo1">
                            <!--提示上传信息-->
                            <p id="demoText"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>




        <div class="layui-row">
            <label class="layui-form-label">* 专辑标签</label>
            <div class="layui-input-block">
                <input type="text" id="tags" name="tags"
                       class="layui-input" lay-verify="required" value="${media.tags}">
            </div>

        </div>

        <div class="layui-row">
            <div>
                <label class="layui-form-label">* 专辑介绍</label>
            </div>

            <div>
                        <textarea id="note" name="note" class="layui-textarea"
                                  lay-verify="note" value="${media.note}">${media.note}</textarea>
            </div>

        </div>
    </div>


    <!-- 业务对象须有hidden字段，保存delFlag和version字段-->
    <input type="hidden" name="mediaguid" value=${media.mediaguid}>
    <!--<div style = "position:fixed;float:right;bottom: 0;">-->
        <layui:submitButtons id="updateButton" />
   <!-- </div>-->
</form>
<!--#} -->
<script>
layui.use(['edit'], function(){
    var mediaEdit = layui.edit
    mediaEdit.init();
});
</script>

<script>
    layui.use('layedit', function(){
        var layedit = layui.layedit;
        $ = layui.jquery;
        form = layui.form;

        layedit.set({
            uploadImage: {
                url: '' //接口url
                ,type: '' //默认post
            }
        });
        var note =   layedit.build('note'); //建立编辑器

        form.verify({
            note:function () {
                layedit.sync(note);
            }
        });

    });
</script>

<script>
    layui.use(['upload','jquery'], function(){
        var $ = layui.$,
            upload = layui.upload;

        //普通图片上传
        var uploadInst = upload.render({
            elem: '#test1'
            ,url: '/upload/'
            ,before: function(obj){//文件上传前的回调
                //预读本地文件示例，不支持ie8
                obj.preview(function(index, file, result){
                    $('#imageurl1').attr('src', result); //图片链接（base64）直接将图片地址赋值给img的src属性
                });
            }
            ,done: function(res){
                //如果上传失败
                if(res.code > 0){
                    return layer.msg('上传失败');
                }
                //上传成功
                //TODO 把上传成功的地址赋值给imageurl $('#imageurl').attr('value', result);
            }
            ,error: function(){
                //演示失败状态，并实现重传
                var demoText = $('#demoText');
                demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-xs demo-reload">重试</a>');
                demoText.find('.demo-reload').on('click', function(){
                    uploadInst.upload();
                });
            }
        });

    });
</script>

